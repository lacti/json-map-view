(window["webpackJsonpjson-map-view"]=window["webpackJsonpjson-map-view"]||[]).push([[0],{29:function(e,n,t){e.exports=t(52)},34:function(e,n,t){},35:function(e,n,t){},42:function(e,n){},44:function(e,n){},52:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(27),c=t.n(o),l=(t(34),t(3)),u=(t(35),t(28)),i=t.n(u),s=t(8),f=t(18),d=function e(n,t,r){if(t.toLowerCase().includes(r.toLowerCase()))return!0;if("string"!==typeof n[t])for(var a=n[t],o=0,c=Object.keys(a);o<c.length;o++){if(e(a,c[o],r))return!0}return!1},m=function(e,n,t){var r=function(e){return function(n,t){if(!n)return{};for(var r=t;r>=0;--r){var a=e[r];if(a){for(var o={},c=0,l=Object.keys(n);c<l.length;c++){var u=l[c];d(n,u,a)&&(o[u]=n[u])}return o}}return n}}(t);return function(t){for(var a=r(e,0),o=0;o<t;o++){var c=n[o];if(!c)return{};if(!(a=r(p(a,c),o+1)))return{}}return a}},p=function(e,n){return y(n.filter(function(n){return!!e&&!!e[n]}).map(function(n){return[n,e[n]]}),n.length>1)},y=function e(n,t){var r={},a=v(n.map(function(e){var n=Object(l.a)(e,2);n[0];return n[1]}).flatMap(function(e){return Object.keys(e)})),o=!0,c=!1,u=void 0;try{for(var i,s=function(){var a=i.value,o=n.filter(function(e){var n=Object(l.a)(e,2)[1];return!!n[a]&&"string"!==typeof n[a]}).map(function(e){var n=Object(l.a)(e,2);return[n[0],n[1][a]]});o.length>0&&(r[a]=e(o,t));var c=n.filter(function(e){var n=Object(l.a)(e,2)[1];return!!n[a]&&"string"===typeof n[a]}).map(function(e){var n=Object(l.a)(e,2);return[n[0],n[1][a]]});1===c.length?r[t?g(a,c[0][0]):a]=c[0][1]:c.length>1&&c.forEach(function(e){var n=Object(l.a)(e,2),t=n[0],o=n[1];return r[g(a,t)]=o})},f=a[Symbol.iterator]();!(o=(i=f.next()).done);o=!0)s()}catch(d){c=!0,u=d}finally{try{o||null==f.return||f.return()}finally{if(c)throw u}}return r},g=function(e,n){return[e,n].join("$$")},v=function(e){return Object(f.a)(new Set(e||[]))},E=function(e){var n=e.placeholder,t=e.onKeyUp,r=e.value;return a.a.createElement("input",{type:"text",onKeyUp:t,placeholder:n,defaultValue:r||""})},w=function(e){var n=e.nodeKey;return a.a.createElement(a.a.Fragment,null,n.split(" ").map(function(e,n){return 0===n?a.a.createElement("span",{key:n,className:"node-text"},e):a.a.createElement(a.a.Fragment,{key:n},a.a.createElement("br",null),a.a.createElement("span",{className:"node-text"},e))}))},h=function(e){var n=e.nodeKey,t=e.nodeValue,r=e.onNodeKeyToggled,o=Object.keys(t).length;return a.a.createElement("button",{className:"selected",onClick:function(){return r(n)},title:"".concat(n," (").concat(o,")")},a.a.createElement(w,{nodeKey:n}),a.a.createElement("span",{className:"count"},"(",o,")"))},b=function(e){var n=e.nodeKey,t=e.nodeValue,r=e.onNodeKeyToggled,o=Object.keys(t).length;return a.a.createElement("button",{onClick:function(){return r(n)},title:"".concat(n," (").concat(o,")")},a.a.createElement(w,{nodeKey:n}),a.a.createElement("span",{className:"count"},"(",o,")"))},O=function(e){var n=e.nodeKey,t=e.nodeValue,r=e.selectedNodeKeys,o=e.onNodeKeyToggled;return r&&r.includes(n)?a.a.createElement(h,{nodeKey:n,nodeValue:t,onNodeKeyToggled:o}):a.a.createElement(b,{nodeKey:n,nodeValue:t,onNodeKeyToggled:o})},j=function(e){return e.includes("$$")?e.substring(e.indexOf("]")+1,e.indexOf("$$")).trim():e.substring(e.indexOf("]")+1).trim()},N=function(e){return e.includes("$$")?e.substring(e.indexOf("$$")+"$$".length).split("$$").map(function(e){return e.trim()}):[]},K=function(e){var n=e.text,t=e.link;return a.a.createElement("a",{className:"link",href:t,title:t,target:"_blank"},a.a.createElement("span",{className:"text"},j(n)),N(n).map(function(e){return a.a.createElement("span",{key:e,className:"reference"},e)}))},k=function(e){var n=e.text,t=e.tooltip;return a.a.createElement("span",{className:"link",title:t},n)},x=function(e){var n=e.text,t=e.value;return/^(http|\/|\.)/i.test(t)?a.a.createElement(K,{text:n,link:t}):a.a.createElement(k,{text:n,tooltip:t})},$=function(e,n){return"string"===typeof e[1]?e[0].localeCompare(n[0]):S(n[1])-S(e[1])},S=function(e){return"string"===typeof e?e.length:Object.keys(e).length},U=function(e){var n=e.model,t=e.selectedNodeKeys,r=e.onNodeKeyToggled;return a.a.createElement("ul",null,Object.entries(n).filter(function(e){return"string"!==typeof Object(l.a)(e,2)[1]}).sort($).map(function(e){var n=Object(l.a)(e,2),o=n[0],c=n[1];return a.a.createElement("li",{key:o},a.a.createElement(O,{nodeKey:o,nodeValue:c,selectedNodeKeys:t,onNodeKeyToggled:r}))}),Object.entries(n).filter(function(e){return"string"===typeof Object(l.a)(e,2)[1]}).sort($).map(function(e){var n=Object(l.a)(e,2),t=n[0],r=n[1];return a.a.createElement("li",{key:t},a.a.createElement(x,{text:t,value:r}))}))},T=t(17),C=t.n(T),V=function(){if(!window||!window.location)throw new Error("Invalid window.location");var e=window.location.href;if(!e)throw new Error("Invalid window.location.href");return e},L=function(e){return window.location.replace(function(e){var n=V(),t=n.indexOf("#");return(t>=0?n.substring(0,t):n)+"#"+C.a.compress(JSON.stringify(e),{outputEncoding:"Base64"})}(e))},J=function(e){var n=e.map,t=n.headers,o=n.body,c=function(){return Array(t.length).fill(null)},u=function(){var e=V(),n=e.indexOf("#");if(n<0)return null;try{return JSON.parse(C.a.decompress(e.substring(n+1),{inputEncoding:"Base64"}))}catch(t){return console.error("Invalid state at URL",t),null}}();console.log(u);var d=Object(r.useState)(u?u.selectedNodeKeys:c()),p=Object(l.a)(d,2),y=p[0],g=p[1],v=Object(r.useState)(u?u.filters:c()),w=Object(l.a)(v,2),h=w[0],b=w[1],O=function(e){return L({selectedNodeKeys:e,filters:h}),g(e)},j=function(){L({selectedNodeKeys:y,filters:h}),i()(window.location.href),alert("URL copied!\n"+window.location.href)},N=m(o,y,h),K=function(e){return function(n,t){return e.map(function(e,r){return r!==n?e:t})}}(h),k=function(e){return function(n,t){return e.map(function(e,r){return r<n?e:r>n?null:(e||[]).includes(t)?(e||[]).filter(function(e){return e!==t}):[].concat(Object(f.a)(e||[]),[t])})}}(y),x=function(e){return function(n,t,r){return e.map(function(e,a){return a!==n?a<n?e:null:r?Object.keys(t):null})}}(y);return a.a.createElement("div",{className:"row"},t.map(function(e,n){var r=N(n),o=y[n],c=null!==o&&o.length>0?"column selected":"column",l=function(e){return O(x(n,r,e))};return a.a.createElement("div",{key:e,className:c},a.a.createElement(E,{placeholder:e,value:h[n],onKeyUp:function(e){return function(e){return L({selectedNodeKeys:y,filters:e}),b(e)}(K(n,e.target.value))}}),a.a.createElement(s.b,{id:"ToggleMenu-".concat(e)},a.a.createElement(U,{model:r,selectedNodeKeys:o,onNodeKeyToggled:function(e){return O(k(n,e))}})),a.a.createElement(s.a,{id:"ToggleMenu-".concat(e)},n<t.length-1&&a.a.createElement(a.a.Fragment,null,a.a.createElement(s.c,{onClick:function(){return l(!0)}},"Select all"),a.a.createElement(s.c,{onClick:function(){return l(!1)}},"Deselect all")),a.a.createElement(s.c,{onClick:j},"Copy this URL")))}))},R=function(e){var n=e.url,t=e.setUrl;return a.a.createElement("div",{className:"sourceUrl"},a.a.createElement("input",{type:"text",defaultValue:n||"",placeholder:"Map JSON URL",onKeyPress:function(e){return"Enter"===e.key?t(e.target.value):void 0}}))},B=function(){var e=Object(r.useState)(window&&window.location&&window.location.search?new URLSearchParams(window.location.search).get("map"):null),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(null),u=Object(l.a)(c,2),i=u[0],s=u[1];return Object(r.useEffect)(function(){t&&fetch(t).then(function(e){return e.json()}).then(function(e){return s(e)}).catch(function(e){s(null),console.error(e),alert(e.message)})},[t]),a.a.createElement("div",{className:"app"},a.a.createElement(R,{url:t,setUrl:o}),i&&a.a.createElement(J,{map:i}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,1,2]]]);
//# sourceMappingURL=main.281b0d56.chunk.js.map