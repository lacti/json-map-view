(window["webpackJsonpjson-map-view"]=window["webpackJsonpjson-map-view"]||[]).push([[0],{31:function(e,t,n){e.exports=n(54)},36:function(e,t,n){},37:function(e,t,n){},44:function(e,t){},46:function(e,t){},54:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(28),c=n.n(o),l=(n(36),n(2)),u=n(55),i=(n(37),n(29)),f=n.n(i),s=n(5),d=n(11),m=function(e,t){if(!t)return e;for(var n=t.toLowerCase(),r={},a=0,o=Object.entries(e);a<o.length;a++){var c=o[a],u=Object(l.a)(c,2),i=u[0],f=u[1];p(i,f,n)&&(r[i]=f)}return r},p=function(e,t,n){return!!e.toLowerCase().includes(n)||"string"!==typeof t&&Object.keys(t).some(function(e){return e.toLowerCase().includes(n)})},y=function(e,t,n,r,a){for(var o=function(e,t){if(!t)return e;var n=t.toLowerCase();return function e(t,r){var a={},o=Object.keys(t).filter(function(e){return e.toLowerCase().includes(n)}),c=o.length>0?o:Object.keys(t),l=!0,u=!1,i=void 0;try{for(var f,s=c[Symbol.iterator]();!(l=(f=s.next()).done);l=!0){var d=f.value,m=t[d];if(d.toLowerCase()!==n)if("string"===typeof m)d.toLowerCase().includes(n)&&(a[d]=m);else{var p=e(m,r+1);Object.keys(p).length>0&&(a[d]=p)}else a[d]=m}}catch(y){u=!0,i=y}finally{try{l||null==s.return||s.return()}finally{if(u)throw i}}return a}(e,0)}(e,r),c={0:m(o,n[0])},l=1;l<t.length;l++){var u=t[l-1];if(null===u)break;c[l]=m(v(c[l-1],u,l<a+1),n[l])}return function(e){return c[e]||{}}},v=function(e,t,n){return g(t.filter(function(t){return!!e&&!!e[t]}).map(function(t){return[n?"":t,e[t]]}),t.length>1)},g=function e(t,n){var r,a={},o=(r=t.map(function(e){var t=Object(l.a)(e,2);return t[0],t[1]}).flatMap(function(e){return Object.keys(e)}),Object(d.a)(new Set(r||[]))),c=!0,u=!1,i=void 0;try{for(var f,s=function(){var r=f.value,o=t.filter(function(e){var t=Object(l.a)(e,2)[1];return!!t[r]&&"string"!==typeof t[r]}).map(function(e){var t=Object(l.a)(e,2);return[t[0],t[1][r]]});o.length>0&&(a[r]=e(o,n));var c=t.filter(function(e){var t=Object(l.a)(e,2)[1];return!!t[r]&&"string"===typeof t[r]}).map(function(e){var t=Object(l.a)(e,2);return[t[0],t[1][r]]});1===c.length?a[n?b(r,c[0][0]):r]=c[0][1]:c.length>1&&c.forEach(function(e){var t=Object(l.a)(e,2),n=t[0],o=t[1];return a[b(r,n)]=o})},m=o[Symbol.iterator]();!(c=(f=m.next()).done);c=!0)s()}catch(p){u=!0,i=p}finally{try{c||null==m.return||m.return()}finally{if(u)throw i}}return a},b=function(e,t){return t?[e,t].join("$$"):e},O=function(e){var t=e.placeholder,n=e.onKeyUp,r=e.value;return a.a.createElement("input",{type:"text",onKeyUp:n,placeholder:t,defaultValue:r||""})},w=function(e){var t=e.nodeKey;return a.a.createElement(a.a.Fragment,null,t.split(" ").map(function(e,t){return 0===t?a.a.createElement("span",{key:t,className:"node-text"},e):a.a.createElement(a.a.Fragment,{key:t},a.a.createElement("span",{className:"node-text"},e))}))},h=function(e){var t=e.nodeKey,n=e.nodeValue,r=e.onNodeKeyToggled,o=Object.keys(n).length;return a.a.createElement("button",{className:"selected",onClick:function(){return r(t)},title:"".concat(t," (").concat(o,")")},a.a.createElement(w,{nodeKey:t}),a.a.createElement("span",{className:"count"},"(",o,")"))},j=function(e){var t=e.nodeKey,n=e.nodeValue,r=e.onNodeKeyToggled,o=Object.keys(n).length;return a.a.createElement("button",{onClick:function(){return r(t)},title:"".concat(t," (").concat(o,")")},a.a.createElement(w,{nodeKey:t}),a.a.createElement("span",{className:"count"},"(",o,")"))},E=function(e){var t=e.nodeKey,n=e.nodeValue,r=e.selectedNodeKeys,o=e.onNodeKeyToggled;return r&&r.includes(t)?a.a.createElement(h,{nodeKey:t,nodeValue:n,onNodeKeyToggled:o}):a.a.createElement(j,{nodeKey:t,nodeValue:n,onNodeKeyToggled:o})},k=function(e){return e.includes("$$")?e.substring(e.indexOf("]")+1,e.indexOf("$$")).trim():e.substring(e.indexOf("]")+1).trim()},N=function(e){return e.includes("$$")?e.substring(e.indexOf("$$")+"$$".length).split("$$").map(function(e){return e.trim()}):[]},K=function(e){var t=e.text,n=e.link;return a.a.createElement("a",{className:"link",href:n,title:n,target:"_blank"},a.a.createElement("span",{className:"text"},k(t)),N(t).map(function(e){return a.a.createElement("span",{key:e,className:"reference"},e)}))},x=function(e){var t=e.text,n=e.tooltip;return a.a.createElement("span",{className:"link",title:n},t)},S=function(e){var t=e.text,n=e.value;return/^(http|\/|\.)/i.test(n)?a.a.createElement(K,{text:t,link:n}):a.a.createElement(x,{text:t,tooltip:n})},C=function(e,t){return"string"===typeof e[1]?e[0].localeCompare(t[0]):L(t[1])-L(e[1])},L=function(e){return"string"===typeof e?e.length:Object.keys(e).length},$=function(e){var t=e.model,n=e.selectedNodeKeys,r=e.onNodeKeyToggled;return a.a.createElement("ul",null,Object.entries(t).filter(function(e){return"string"!==typeof Object(l.a)(e,2)[1]}).sort(C).map(function(e,t){var o=Object(l.a)(e,2),c=o[0],u=o[1];return a.a.createElement("li",{key:"".concat(t,"_").concat(c)},a.a.createElement(E,{nodeKey:c,nodeValue:u,selectedNodeKeys:n,onNodeKeyToggled:r}))}),Object.entries(t).filter(function(e){return"string"===typeof Object(l.a)(e,2)[1]}).sort(C).map(function(e,t){var n=Object(l.a)(e,2),r=n[0],o=n[1];return a.a.createElement("li",{key:"".concat(r,"_").concat(t)},a.a.createElement(S,{text:r,value:o}))}))},U=n(14),V=function(e,t){return function(n,a){var o=Object(r.useState)(e&&e[n]?e[n]:a()),c=Object(l.a)(o,2),u=c[0],i=c[1];return[u,function(e){t(Object(U.a)({},n,e)),i(e)}]}},P=function(e){var t=e.map,n=t.headers,r=t.body,o=e.viewState,c=e.setViewState,i=V(o,c),m=function(){return Array(n.length).fill(null)},p=i("selectedNodeKeys",m),v=Object(l.a)(p,2),g=v[0],b=v[1],w=i("filters",m),h=Object(l.a)(w,2),j=h[0],E=h[1],k=i("skipReferenceLevel",function(){return 0}),N=Object(l.a)(k,2),K=N[0],x=N[1],S=Object(u.a)(function(e){var t=e.level,n=e.value;return E(P(t,n))},100),C=Object(l.a)(S,1)[0],L=function(){f()(window.location.href),alert("URL copied!\n"+window.location.href)},U=y(r,g,j,o?o.query:null,K),P=function(e){return function(t,n){return e.map(function(e,r){return r!==t?e:n})}}(j),T=function(e){return function(t,n){return e.map(function(e,r){return r<t?e:r>t?null:(e||[]).includes(n)?(e||[]).filter(function(e){return e!==n}):[].concat(Object(d.a)(e||[]),[n])})}}(g),R=function(e){return function(t,n,r){return e.map(function(e,a){return a!==t?a<t?e:null:r?Object.keys(n):null})}}(g);return a.a.createElement("div",{className:"row"},n.map(function(e,t){var r=U(t),o=g[t],c=null!==o&&o.length>0?"column selected":"column",l=function(e){return b(R(t,r,e))};return a.a.createElement("div",{key:e,className:c},a.a.createElement(O,{placeholder:e,value:j[t],onKeyUp:function(e){return C({level:t,value:e.target.value})}}),a.a.createElement(s.b,{id:"ToggleMenu-".concat(e)},a.a.createElement($,{model:r,selectedNodeKeys:o,onNodeKeyToggled:function(e){return b(T(t,e))}})),a.a.createElement(s.a,{id:"ToggleMenu-".concat(e)},t<n.length-1&&a.a.createElement(a.a.Fragment,null,a.a.createElement(s.c,{onClick:function(){return l(!0)}},"Select all"),a.a.createElement(s.c,{onClick:function(){return l(!1)}},"Deselect all")),a.a.createElement(s.c,{onClick:L},"Copy this URL"),t===n.length-1&&a.a.createElement(s.d,{title:"Skip Reference Level"},Array(n.length-1).fill(0).map(function(e,t){return a.a.createElement(s.c,{key:"skipRefLevel_".concat(t),disabled:K===t,onClick:function(){return x(t)}},t)}))))}))},T=function(e){var t=e.url,n=e.setUrl;return a.a.createElement("div",{className:"sourceUrl"},a.a.createElement("input",{type:"text",defaultValue:t||"",placeholder:"Map JSON URL",onKeyPress:function(e){return"Enter"===e.key?n(e.target.value):void 0}}))},R=function(e){var t=e.placeholder,n=e.onKeyUp,r=e.value;return a.a.createElement("div",{className:"query"},a.a.createElement("input",{type:"text",onKeyUp:n,placeholder:t,defaultValue:r||""}))},D=n(19),J=n.n(D);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var F=function(){if(!window||!window.location)throw new Error("Invalid window.location");var e=window.location.href;if(!e)throw new Error("Invalid window.location.href");return e},I=function(e){return window.location.replace(function(e){var t=F(),n=t.indexOf("#");return(n>=0?t.substring(0,n):t)+"#"+J.a.compress(JSON.stringify(e),{outputEncoding:"Base64"})}(e))},M=function(){var e=function(){var e=F(),t=e.indexOf("#");if(t<0)return null;try{return JSON.parse(J.a.decompress(e.substring(t+1),{inputEncoding:"Base64"}))}catch(n){return console.error("Invalid state at URL",n),null}}();return[e,function(t){return I(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach(function(t){Object(U.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e||{},{},t||{}))}]},_=function(){var e=Object(r.useState)(window&&window.location&&window.location.search?new URLSearchParams(window.location.search).get("map"):null),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(null),i=Object(l.a)(c,2),f=i[0],s=i[1],d=M(),m=Object(l.a)(d,2),p=m[0],y=m[1],v=V(p,y)("query",function(){return""}),g=Object(l.a)(v,2),b=g[0],O=g[1],w=Object(u.a)(function(e){return O(e)},200),h=Object(l.a)(w,1)[0];return Object(r.useEffect)(function(){n&&fetch(n).then(function(e){return e.json()}).then(function(e){return s(e)}).catch(function(e){s(null),console.error(e),alert(e.message)})},[n]),a.a.createElement("div",{className:"app"},a.a.createElement(T,{url:n,setUrl:o}),f&&a.a.createElement(a.a.Fragment,null,a.a.createElement(R,{placeholder:"Query",value:b,onKeyUp:function(e){return h(e.target.value)}}),a.a.createElement(P,Object.assign({map:f},{viewState:p,setViewState:y}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.40af7390.chunk.js.map